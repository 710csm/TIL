# 모듈화

## 모듈화의 장점
1. 코드 재사용
- 둘 이상의 앱 또는 대상에서 일부 코드를 사용하려는 경우 코드를 모듈화하여 코드를 쉽게 공유할 수 있습니다. 그러나 코드에 버그가 있을 경우 모든 프로젝트에서 버그를 수정해야합니다. 이로인해 유지비용이 높아질 수 있습니다.

2. 빌드 시간 단축
- 코드를 모듈화 하고 컴파일된 모듈을 사용하면 빌드 시간을 크게 단축할 수 있습니다. 컴파일된 모듈은 앱 코드가 처음부터 빌드될 때 모듈이 아닌 앱 코드만 컴파일됨을 의미합니다. 따라서 프로젝트의 컴파일 시간을 줄일 수 있습니다.

3. 캡슐화
- 어떤 코드는 관련된 하나의 클래스 또는 클래스 집합에서만 사용됩니다. 코드가 기본 앱 내에 있으면 불필요한 곳에서 사용될 수 있습니다. 때때로 개발자는 실수로 의도하지 않은 곳에서 코드를 사용할 수 있습니다. 이로 인해 버그가 발생할 수 있습니다. 모듈화는 이러한 일을 방지해줄 수 있습니다.

## 모듈화의 단점
1. 복잡성
- 코드를 모듈화 하는 작업이 복잡할 수 있습니다. 먼저 사용되는 코드를 추출하고 코드를 패키징하고 배포해야합니다. 마지막으로 모듈 코드가 사용되는 위치에 해당 패키지를 사용하도록 적절한 import문이 선언되어 있는지 확인해야합니다. 

2. 간접비
- 일부 기능 개발에는 여러 모듈과 이를 사용하는 앱의 변경이 필요할 수 있습니다. 이로 인해 일부 기능의 개발 비용이 증가할 수 있습니다.

3. 출시 시간 지연
- 모듈이 작동하는 방식에 대한 이해가 필요합니다. 모듈화 옵션중 하나인 동적 프레임 워크가 많으면 앱 시작 시간이 느려질 수 있습니다.

## iOS용 모듈화 옵션
- 동적 프레임워크
- 정적 라이브러리

1. 프레임워크
    - 프레임워크는 정해진 매뉴얼, 룰을 제공한다. 개발 시 필수적인 코드와 알고리즘 같은 기능을 제공하는데 이 룰을 지켜야 한다.
    - 클래스와 라이브러리가 합쳐진 구조이며, 이러한 협업 형태를 제공하는 것이다.
    - 예를 들어, 콜백 함수의 정의는 개발자가 하지만 정해진 알고리즘에 따라 그 콜백 함수를 실행하는건 프레임워크이다.
    - 개인이 라이브러리로 이러한 규칙을 구축하는데 시간과 돈이 필요하므로 이미 구축되어 있는 프레임워크를 사용하여 제작에만 집중하는 것이다.
    - 프레임워크 예: 스프링, 부트스트랩, 뷰, 안드로이드, 코코아 터치 등
2. 라이브러리
    - 어떤 특정한 기능을 구현하기 위해 미리 만들어진 함수들의 집합이다. 필요할 때만 자유롭게 사용할 수 있는 일종의 도구이다.
    - 라이브러리를 사용하더라고 프레임워크가 정한 방식에 따라야 하지만 어떻게 사용할 지는 개발자가 정할 수 있다.
    - 라이브러리 예: 리액트, 제이쿼리 등

## 동적 프레임워크
- 프레임 워크는 이미지, nib(xib 및 스토리보드의 컴파일된 형태) 및 기타 자산과 같은 공유 코드 및 공유 리소스를 포함할 수 있는 구조화된 디렉토리입니다.

<img width="682" alt="스크린샷 2021-11-16 오후 3 50 08" src="https://user-images.githubusercontent.com/45002556/141935465-426376ca-e0a0-4042-9219-e335b81cc145.png">

- 프레임워크는 앱에 별도로 존재하며 별도로 로드됩니다. 시스템은 앱을 로드하여 실행하려면 프레임워크 코드를 사용해야한다고 시스템에 알려줍니다. 그런 다음 앱이 의존하는 프레임워크를 로드합니다. 이 과정은 런타임에 작업합니다. 

<img width="493" alt="스크린샷 2021-11-16 오후 3 51 44" src="https://user-images.githubusercontent.com/45002556/141935656-3b9674ca-be58-4836-b465-d9b22d59fea0.png">

## 정적 라이브러리
- 정적 라이브러리는 컴파일 된 소스코드 파일의 모음입니다. 예를들어 FileA.swift, FileB.swift그리고 FileC.swift이 있으면 정적 라이브러리를 사용하여 이러한 파일을 컴파일하고 이러한 파일을 모두 포함하는 단일 파일에 래핑 할 수 있습니다. 파일의 확장자는 .a 아카이브의 줄임말입니다.

<img width="721" alt="스크린샷 2021-11-16 오후 3 57 28" src="https://user-images.githubusercontent.com/45002556/141936328-910f53a5-654a-4236-99cb-f16135f956b2.png">

- 시스템이 앱을 로드하면 정적 라이브러리 기능이 단일 실행 파일로 로드됩니다.

<img width="288" alt="스크린샷 2021-11-16 오후 3 58 05" src="https://user-images.githubusercontent.com/45002556/141936410-5dac82a3-51c7-4737-b6ed-d8e3c35a672b.png">

## 정적 라이브러리와 동적 프레임워크의 차이점

- 정적 및 동적 프레임워크는 소프트웨어 개발에서 재사용 가능한 코드를 패키징하고 배포하는 방법이지만, 이들 사이에는 몇 가지 주요 차이점이 있다. <br/><br/>정적 프레임워크는 컴파일 시 응용 프로그램에세 직접 연결되는 미리 컴파일된 코드 라이브러리이다. 이것은 필요한 모든 코드가 응용 프로그램의 실행 가능한 이진 파일에 포함되어 크기가 더 커진다는 것을 의미한다. 코드가 응용프로그램에 연결되면 전체 응용 프로그램을 다시 컴파일하지 않고는 코드를 변경하거나 업데이트를 할 수 없습니다. 정적 프레임워크는 일반적으로 코드가 자주 변경되지 않을 것으로 예상되거나 외부 종속성 없이 응용 프로그램을 실행할 때 사용됩니다. <br/><br/>반면에 동적 프레임워크는 필요할 때 런타임에 로드되는 코드의 공유 라이브러리이다. 이것은 코드가 응용 프로그램 이진 파일 외부에 저장되고 필요에 따라 메모리에 로드된다는 것을 의미합니다. 동적 프레임워크는 응용 프로그램을 다시 컴파일 할 필요 없이 업데이트하거나 교체할 수 있으므로 정적 프레임워크보다 유연합니다. 일반적으로 코드가 자주 변경될 것으로 예상되는 경우와 응용 프로그램이 외부 종속성에 의존할 수 있는 경우에 사용됩니다. <br/><br/> 요약하자면 정적 및 동적 프레임워크 간의 주요 차이점은 애플리케이션에 연결되는 방식, 애플리케이션 크기에 미치는 영향, 업데이트 및 외부 종속성 측면에서의 유연성입니다.

## 정적 라이브러리와 동적 프레임워크의 차이점 요약
- 정적 라이브러리는 앱과 함깨 로드되어 앱 시작 시간을 단축 할 수 있습니다.
- 정적 라이브러리에는 리소스가 포함될 수 없습니다. 번들을 사용하여 별도로 가져올 수 있습니다.
- 동적 라이브러리는 별도로 로드되며 앱 실행 시간이 더 느릴 수 있습니다.
- 동적 라이브러리에는 리소스가 포함될 수 있습니다.

<img width="741" alt="스크린샷 2021-11-16 오후 4 02 23" src="https://user-images.githubusercontent.com/45002556/141936835-10c91308-434d-44af-9ef7-b9c203a150dd.png">

## 어떤 Mach-O(Mach Object file format) 타입을 선택해야 할까?
- 일반적으로 리소스를 스스로 가지고 있거나 전체 소스를 제공하는 경우 Dynamic Framework를, 그렇지 않고 SDK 형태로 배포하는 경우는 Static Framework를 선택합니다.
